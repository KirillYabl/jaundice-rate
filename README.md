# Фильтр желтушных новостей

Веб сервер принимающий на вход ссылки на новостные статьи и оценивающий их по "желтушности" (коэффициент от 0 до 100)

На выход по каждой статье сообщается информация вида:

```json
{"urls":
  [
    {"url": "https://ya.ru", "words": null, "jaundice_rate": null, "status": "PARSING_ERROR"},
    {"url": "https://google.com", "words": null, "jaundice_rate": null, "status": "PARSING_ERROR"},
    {"url": "https://inosmi.ru/20230206/siriya-260386598.html", "words": 103, "jaundice_rate": 1.94, "status": "OK"}
  ]
}
```

Статусы ответа:
- OK - статья успешно обработана
- FETCH_ERROR - несуществующая страница
- PARSING_ERROR - страница, которую не умеет парсить сервер
- TIMEOUT - или слишком большая статья или сайт слишком долго отвечает

Пока поддерживается только один новостной сайт - [ИНОСМИ.РУ](https://inosmi.ru/). Для него разработан специальный адаптер, умеющий выделять текст статьи на фоне остальной HTML разметки. Для других новостных сайтов потребуются новые адаптеры, все они будут находиться в каталоге `adapters`. Туда же помещен код для сайта ИНОСМИ.РУ: `adapters/inosmi_ru.py`.

В перспективе можно создать универсальный адаптер, подходящий для всех сайтов, но его разработка будет сложной и потребует дополнительных времени и сил.

# Как установить

Вам понадобится Python версии 3.7 или старше. Для установки пакетов рекомендуется создать виртуальное окружение.

Первым шагом установите пакеты:

```
pip install -r requirements.txt
```

Если вам необходим расчет рейтинга желтушности то вам нужно иметь собственный список "желтых" слов

Вам необходимо создать папку `data`, в ней папку `charged_dict`, а в ней файл(ы) со своими списками слов

Слова в списке пишутся отдельно в каждой строчке

# Как запустить

```
python web_server.py
```

После этого на вашем компьютере откроется порт 8080 на прием запросов вида:

```
http://127.0.0.1:8080/?urls=https://ya.ru,https://google.com,https://inosmi.ru/20230206/siriya-260386598.html
```

# Как запустить тесты

Для тестирования используется [pytest](https://docs.pytest.org/en/latest/), тестами покрыты фрагменты кода сложные в отладке: text_tools.py и адаптеры. Команды для запуска тестов:

```
python -m pytest adapters/inosmi_ru.py
```

```
python -m pytest text_tools.py
```

```
python -m pytest articles_processor.py
```

# Цели проекта

Код написан в учебных целях. Это урок из курса по веб-разработке — [Девман](https://dvmn.org).
